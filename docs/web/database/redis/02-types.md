# æ•°æ®ç±»å‹

Redis æ˜¯ ä¸€ç§æ•°æ®ç»“æ„ serverã€‚åœ¨å…¶æ ¸å¿ƒéƒ¨åˆ†ï¼ŒRedis
æä¾›äº†ä¸€é›†åˆçš„æœ¬åœ°æ•°æ®ç±»å‹æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³å„ç§å„æ ·çš„é—®é¢˜ï¼Œä»**ç¼“å­˜**åˆ°**é˜Ÿåˆ—**å†åˆ°**äº‹ä»¶å¤„ç†**ç­‰ç­‰ã€‚ ä¸‹é¢æ˜¯å…³äºæ¯ç§æ•°æ®ç±»å‹çš„æè¿°ã€‚

**Core**ï¼š

- `Strings`ï¼šRedis strings æ˜¯æœ€åŸºç¡€çš„ Redis æ•°æ®ç±»å‹ï¼Œä»£è¡¨äº†å­—èŠ‚åºåˆ—ã€‚
- `Lists`ï¼šRedis lists æ˜¯ ä¸€ç»„ stringsï¼ŒæŒ‰ç…§æ’å…¥çš„é¡ºåºæ’åºã€‚
- `Sets`ï¼šRedis sets æ˜¯å”¯ä¸€ strings çš„æ— åºé›†åˆï¼Œå°±åƒä½ å–œçˆ±çš„ç¼–ç¨‹è¯­è¨€ä¸€æ ·ã€‚
- `Hashes`ï¼šRedis hashes ä¸ºå»ºæ¨¡ä¸ºå­—æ®µå€¼å¯¹é›†åˆçš„è®°å½•ç±»å‹ã€‚Redis çš„ hashes åƒ Python çš„ å­—å…¸ï¼ŒJava
  çš„ HashMapsã€‚
- `Sorted sets`ï¼šRedis sorted sets æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²çš„ç›¸å…³å…³è”åˆ†æ•°ä¿æŒé¡ºåºçš„ sets
- `Streams`ï¼šRedis stream æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºä»…é™„åŠ æ—¥å¿—ã€‚stream å¸®åŠ©æŒ‰äº‹ä»¶å‘ç”Ÿçš„é¡ºåºè®°å½•äº‹ä»¶ï¼Œç„¶åè”åˆå®ƒä»¬è¿›è¡Œå¤„ç†ã€‚
- `Geospatial indexes`ï¼šRedis geospatial indexes å¯¹äºç»™å®š geospatial åŠå¾„æˆ–
- `Bitsmaps`ï¼šRedis bitmaps è®©ä½ å¯¹å­—ç¬¦ä¸²è¿›è¡Œä½è¿ç®—ã€‚
- `Bitfields`ï¼šRedis Bitfields èƒ½å¤Ÿåœ¨ä¸€ä¸ª string å€¼ä¸­æœ‰æ•ˆç‡åœ°ç¼–ç å¤šç§è®¡æ•°å™¨ countersã€‚
- `HyperLogLog`ï¼šRedis HyperLogLog æ•°æ®ç»“æ„å¯¹å¤§é›†åˆçš„ åŸºæ•° cardinality(å³å…ƒç´ çš„æ•°é‡)è¿›è¡Œæ¦‚ç‡ä¼°è®¡ã€‚
- `Extensions`ï¼šRedis å¯ä»¥é€šè¿‡è‡ªå·±ç¼–å†™ lua æˆ–ä½¿ç”¨åˆ«äººçš„ modules API æ¥æ‰©å±•ç±»å‹ã€‚ ğŸ„ğŸº

## æ•™ç¨‹

ä»¥ä¸‹æ˜¯å®è·µæ•™ç¨‹ï¼Œå®ƒä½¿ç”¨ Redis CLI æ•™æˆ‘ä»¬ Redis æ ¸å¿ƒçš„æ•°æ®ç±»å‹å†…å®¹ã€‚

### Keys

Redis keys æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•äºŒè¿›åˆ¶åºåˆ—ä½œä¸ºä¸€ä¸ª keyï¼Œä»å­—ç¬¦ä¸²`foo`åˆ°ä¸€ä¸ª JPEG æ–‡ä»¶çš„å†…å®¹éƒ½å¯ä»¥ï¼Œç”šè‡³ç©ºçš„å­—ç¬¦ä¸²éƒ½æ˜¯åˆæ³•çš„ keyã€‚

å…³äº keys çš„ä¸€äº›è§„åˆ™ï¼š

- å¤ªé•¿çš„ keys ä¸æ˜¯ä¸ª good idea ğŸ¤“ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª 1024 bytes çš„ key
  æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä¸»æ„ï¼šä¸ä»…æ˜¯å› ä¸ºåœ¨å†…å­˜æ–¹é¢å®ƒå ç”¨å¤ªå¤šï¼Œè€Œä¸”åœ¨æ•°æ®é›†æŸ¥æ‰¾å¯èƒ½éœ€è¦å‡ æ¬¡ä»£ä»·é«˜æ˜‚çš„é”®æ¯”è¾ƒã€‚å³ä½¿æ‰‹å¤´çš„ä»»åŠ¡æ˜¯åŒ¹é…ä¸€ä¸ªå¤§æ•°å€¼çš„å­˜åœ¨ï¼Œhash å®ƒ (ä¾‹å¦‚ç”¨ SHA1)æ˜¯ä¸€ä¸ªæ›´å¥½çš„ä¸»æ„ï¼Œç‰¹åˆ«æ˜¯ä»å†…å­˜å’Œå¸¦å®½æ¥çœ‹ã€‚
- å¤ªçŸ­çš„ keys ä¹Ÿä¸å¸¸å¸¸æ˜¯ä¸ª good idea ğŸ’©ã€‚å¦‚æœä½ å¯ä»¥æŠŠé”®å†™æˆ`user:1000:followers`ï¼Œé‚£ä¹ˆå°†å®ƒå†™æˆ`u1000flw`ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚å‰è€…æ›´åŠ å¯è¯»å¹¶ä¸”é”®å¯¹è±¡æœ¬äº‹å ç”¨ç©ºé—´ä¸å€¼å¯¹è±¡ä½¿ç”¨çš„ç©ºé—´ç›¸æ¯”ï¼Œå¢åŠ çš„ç©ºé—´ä¹Ÿå¾ˆå°‘ã€‚å½“ç„¶çŸ­çš„ keys èƒ½æ˜¾è‘—åœ°å ç”¨æ›´å°‘çš„å†…å­˜ï¼Œæˆ‘ä»¬çš„å·¥ä½œå°±æ˜¯æ‰¾åˆ°æ­£ç¡®çš„å¹³è¡¡ã€‚
- å°è¯•åšæŒä¸€ç§ å‘½åæ¨¡å¼
  schemaï¼Œæ¯”å¦‚`object-type:id`æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œåƒ`user:1000`ã€‚ç‚¹æˆ–è€…çŸ­çº¿ç»å¸¸ç”¨æ¥åˆ†éš”å¤šè¯å­—æ®µï¼Œæ¯”å¦‚`comment:4321:repy.to` æˆ–è€… `comment:4321:reply-to`ã€‚
- æœ€å¤§çš„ key ä½“ç§¯æ˜¯ **512MB**

### Strings

Redis String ç±»å‹æ˜¯èƒ½ä¸ Redis key å…³è”èµ·æ¥æœ€ç®€å•çš„å€¼ç±»å‹ã€‚
å› ä¸º Redis keys æ˜¯ stringsï¼Œå½“ä½ ä¹Ÿä½¿ç”¨ string ç±»å‹ä½œä¸ºå€¼æ—¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿ æŠŠä¸€ä¸ª string map æˆå¦ä¸ª stringã€‚string æ•°æ®ç±»å¯¹äºå¾ˆå¤šæƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼Œåƒç¼“å­˜ html ç‰‡æ®µ(fragments)æˆ–é¡µé¢ã€‚

è®©æˆ‘ä»¬æ¥ç©ç©ä¸€ä¸‹ string typeï¼ˆä»¥ redis-cli ä¸ºä¾‹ï¼‰

```bash
127.0.0.1:6379> set hello nihao
OK
127.0.0.1:6379> get hello
"nihao"
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç”¨ **SET** ä¸ **GET** å‘½ä»¤æ¥è®¾ç½®å¹¶å–å› string çš„å€¼ã€‚è®°å¾— **SET**
ä¼šå–ä»£ä»»ä½•å·²ç»åœ¨è¯¥ key
ä¸Šå‚¨å­˜çš„ç»“æœã€‚åœ¨é”®å·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå³ä½¿è¯¥é”®ä¸éå­—ç¬¦ä¸²çš„å€¼ç›¸å…³è”ï¼ŒSET ä»ç„¶æ‰§è¡Œèµ‹å€¼ã€‚

å€¼èƒ½æ˜¯ ä»»ä½•å½¢å¼çš„ stringsï¼ˆåŒ…æ‹¬äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼Œä¾‹å¦‚ä½ å¯ä»¥å­˜å‚¨ä¸€ä¸ª jpeg
å›¾ç‰‡åœ¨å€¼é‡Œï¼Œä½†æ˜¯ä¸€ä¸ªå€¼çš„å†…å­˜ä¸èƒ½è¶…è¿‡ `512MB`

**SET** å‘½ä»¤æœ‰ä¸€äº›æœ‰è¶£çš„é€‰é¡¹ï¼Œä½œä¸ºé™„åŠ å‚æ•°è¢«æä¾›ã€‚æ¯”å¦‚ æˆ‘æƒ³è®©**SET**å·²ç»å­˜åœ¨çš„ key
å¤±è´¥ï¼Œæˆ–è€…åè¿‡æ¥åªæœ‰å½“å€¼å­˜åœ¨æ—¶æ‰æˆåŠŸã€‚

```bash
127.0.0.1:6379> set ğŸ•Š  é¸½å­
OK
127.0.0.1:6379> get ğŸ•Šï¸
"\xe9\xb8\xbd\xe5\xad\x90"

# å½“å­˜åœ¨ï¼Œå°±å¤±è´¥
127.0.0.1:6379> set ğŸ•Š  gz nx
(nil)
127.0.0.1:6379> get ğŸ•Šï¸
"\xe9\xb8\xbd\xe5\xad\x90"

# å½“å­˜åœ¨ï¼Œæ‰æˆåŠŸ
127.0.0.1:6379> set ğŸ•Š  gz xx
OK
127.0.0.1:6379> get ğŸ•Š
"gz"
```
