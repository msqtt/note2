# MyBatis 获取参数值的两种方式（重点）

- MyBatis 获取参数值的两种方式：`${}`和`#{}`
- `${}`的本质就是字符串拼接，`#{}`的本质就是占位符赋值
- `${}`使用字符串拼接的方式拼接 sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是`#{}`使用占位符赋值的方式拼接 sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号


## 单个字面量类型的参数

- 若 mapper 接口中的方法参数为单个的字面量类型，此时可以使用、`${}`和`#{}`以任意的名称（最好见名识意）获取参数的值，注意`${}`需要手动加单引号

```xml
<!--User getUserByUsername(String username);-->
<select id="getUserByUsername" resultType="User">
	select * from t_user where username = #{username}
</select>
```

```xml
<!--User getUserByUsername(String username);-->
<select id="getUserByUsername" resultType="User">
	select * from t_user where username = '${username}'
</select>
```

##  多个字面量类型的参数

- 若 mapper 接口中的方法参数为多个时，此时 MyBatis 会自动将这些参数放在一个 map 集合中
    1. 以 `arg0,arg1…`为键，以参数为值；
    2. 以 `param1,param2…`为键，以参数为值；

- 因此只需要通过、`${}`和`#{}`访问 map 集合的键就可以获取相对应的值，注意`${}`需要手动加单引号。
- 使用 arg 或者 param 都行，要注意的是，arg 是从 arg0 开始的，param 是从 param1 开始的


```xml
<!--User checkLogin(String username,String password);-->
<select id="checkLogin" resultType="User">
	select * from t_user where username = #{arg0} and password = #{arg1}
</select>
```

```xml
<!--User checkLogin(String username,String password);-->
<select id="checkLogin" resultType="User">
	select * from t_user where username = '${param1}' and password = '${param2}'
</select>
```

## map 集合类型的参数

- 若 mapper 接口中的方法需要的参数为多个时，此时可以手动创建 map 集合，将这些数据放在 map 中只需要通过、`${}`和`#{}`访问 map 集合的键就可以获取相对应的值，注意`${}`需要手动加单引号

```xml
<!--User checkLoginByMap(Map<String,Object> map);-->
<select id="checkLoginByMap" resultType="User">
	select * from t_user where username = #{username} and password = #{password}
</select>
```

```java
@Test
public void checkLoginByMap() {
	SqlSession sqlSession = SqlSessionUtils.getSqlSession();
	ParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);
	Map<String,Object> map = new HashMap<>();
	map.put("usermane","admin");
	map.put("password","123456");
	User user = mapper.checkLoginByMap(map);
	System.out.println(user);
}
```

## 实体类类型的参数

- 若 mapper 接口中的方法参数为实体类对象时此时可以使用、`${}`和`#{}`，通过访问实体类对象中的属性名获取属性值，注意`${}`需要手动加单引号

```xml
<!--int insertUser(User user);-->
<insert id="insertUser">
	insert into t_user values(null,#{username},#{password},#{age},#{sex},#{email})
</insert>
```

```java
@Test
public void insertUser() {
	SqlSession sqlSession = SqlSessionUtils.getSqlSession();
	ParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);
	User user = new User(null,"Tom","123456",12,"男","123@321.com");
	mapper.insertUser(user);
}
```

## 使用@Param 标识参数

- 可以通过@Param 注解标识 mapper 接口中的方法参数，此时，会将这些参数放在 map 集合中

    1. 以@Param 注解的 value 属性值为键，以参数为值；
    2. 以 param1,param2…为键，以参数为值；

- 只需要通过、{}和#{}访问 map 集合的键就可以获取相对应的值，注意{}需要手动加单引号

```xml
<!--User CheckLoginByParam(@Param("username") String username, @Param("password") String password);-->
<select id="CheckLoginByParam" resultType="User">
    select * from t_user where username = #{username} and password = #{password}
</select>
```

```java
@Test
public void checkLoginByParam() {
	SqlSession sqlSession = SqlSessionUtils.getSqlSession();
	ParameterMapper mapper = sqlSession.getMapper(ParameterMapper.class);
	mapper.CheckLoginByParam("admin","123456");
}
```

## 总结
建议分成两种情况进行处理
1. 实体类类型的参数
2. 使用@Param 标识参数
